%% Physical layer
R = 500;
N_Service = 2;
N_Slice =  2;
BW = 120*1e3;%10*1e6;  
n0 = -174;%-174 ; %dbm
N0 = db2pow(n0)/1000;
Pc1 = 10; %watt
Pc  = db2pow(Pc1)/1000;
Pt = 23;
Pmax = db2pow(Pt)/1000;
Rt = .1*BW;%0.1*BW; 
N_PRB = 8;
N_Ut = 10;
N_rrh = 3;
imax = 1;
rrh2slice = randi([0 imax],N_rrh, N_Slice);
service2slice = randi([0 imax],N_Service, N_Slice);
Ut2Service = randi([0 imax],N_Ut, N_Service);
PRB2Slice = randi([0 imax],N_PRB, N_Slice);
Ut_map = randi([0 0],N_Ut, N_PRB);
Popt = ones(1, N_Ut)*Pmax;
iter_max =1;
N_BBU = 2;
BBU_map = zeros(N_BBU, N_Slice);
Crrh = zeros(1, N_rrh);
Prrh = zeros(1,N_rrh);
var_q = 1e-5;
%% VNF MAC LAYER
N_VNF1 = 10;
VNF2Slice1 = randi([0 imax],N_VNF1, N_Slice);
N_VNF2 = 10;
VNF2Slice2 = randi([0 imax],N_VNF2, N_Slice);
mu1 = 10* Rt;
alpha_m1  = Rt;
mu2 = 10* Rt;
alpha_m2  = Rt;
lamda = Rt/10000;
delay_thresh = 9.2593e-06;
Delay_Service1 = zeros(N_Service,1);
Delay_Service2 = zeros(N_Service,1);
Delay_Transmission = zeros(N_Service,1);